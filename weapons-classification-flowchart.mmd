flowchart TB
  %% Top level
  SmallArms["Which Small Arms **group** best fits?"]

  SmallArms --> |"<h1>Handgun</h1> <p>a firearm which is grasped by placing both the control hand and support hand around the pistol grip, and which may be readily fired with one hand (ARES p37)</p><img src='https://github.com/paigemoody/weapons_classification_resources.github.io/blob/main/sources/ARES_arms_munitions_classification_system/visuals/Figure2.8_2.9_2.10_Handguns.png?raw=true'</>"| Handguns_BarrelType
  SmallArms --> |"<h1>Long Gun</h1> <p></p>"| LongGuns

  Handguns_BarrelType["<h1>Which barrel type best fits?</h1> <img src='https://github.com/paigemoody/weapons_classification_resources.github.io/blob/main/sources/small_arms_survey/visuals/Figure_3.4_Rifled_and_smooth-bore_barrels.png?raw=true' />"]


  %% Bore-type breaks
  Handguns_BarrelType --> |Rifled| Handguns_Rifled
  Handguns_BarrelType --> |Smooth Bore| SmoothBore_OtherHandguns

  %% Handguns details
  Handguns_Rifled["Which type of rifiled handgun best matches?"]
  Handguns_Rifled --> |Self Loading Pistols| Rifled_SelfLoadingPistols
  Handguns_Rifled --> |Revolvers| Rifled_Revolvers

  SmoothBore_OtherHandguns["Other handguns<br/><img src='' width='56' height='56'/>"]

  %% Long guns details
  LongGuns["Which **barrel type** best fits?"]

  LongGuns --> |Rifled| LongGuns_Rifled
  LongGuns --> |Smooth Bore| LongGuns_SmoothBore

  Rifled_SelfLoadingPistols["Self-loading<br/>Pistols<br/><img src='https://github.com/paigemoody/weapons_classification_resources.github.io/blob/main/sources/ARES_arms_munitions_classification_system/visuals/Figure2.13_SelfLoading_Pistols.png?raw=true' />"]
  Rifled_Revolvers["Revolvers<br/><img src='https://github.com/paigemoody/weapons_classification_resources.github.io/blob/main/sources/ARES_arms_munitions_classification_system/visuals/Figure2.12_Revolvers.png?raw=true' width='56' height='56'/>"]

  LongGuns_Rifled["Which type of **rifiled long gun** best matches?"]
  Rifled_SubMachineGuns["Sub-machine<br/>guns<br/><img src='' width='56' height='56'/>"]
  Rifled_ManPortableMachineGuns["Man-portable<br/>machine guns<br/><img src='' width='56' height='56'/>"]
  
  LongGuns_SmoothBore["Smooth-bore<br/><img src='' width='56' height='56'/>"]

  LongGuns_Rifled --> |Sub-machine Guns| Rifled_SubMachineGuns
  LongGuns_Rifled --> |Man-portable Machine Guns| Rifled_ManPortableMachineGuns
  LongGuns_Rifled --> |Other| Rifles

  LongGuns_SmoothBore --> |Shotguns| Shotguns
  LongGuns_SmoothBore --> |Other Smooth Bore Long Guns| OtherSmoothBoreLongGuns

  Rifles["Rifles: Which **sub-type** of **rifled long guns** matches best?"]
  
  Rifles --> |Self-Loading| SelfLoadingRifles
  Rifles --> |Manually-Loaded| ManuallyOperatedRifles

  Shotguns["How is amunition loaded into the shotgun?"]
  OtherSmoothBoreLongGuns["Other smooth-bore<br/>long guns<br/><img src='' width='56' height='56'/>"]

  %% Rifles split
  SelfLoadingRifles["Which operation method of **self-loading rifled long gun** best fits?"]
  ManuallyOperatedRifles["Which operation method **manually-loading rifled long gun** best fits?"]

  %% Self-loading rifles leaves
  AutomaticRifles["Automatic Rifles<br/><img src='' width='56' height='56'/>"]
  SemiAutomaticRifles["Semi-automatic<br/>Rifles<br/><img src='' width='56' height='56'/>"]

  SelfLoadingRifles --> |Automatic Rifles| AutomaticRifles
  SelfLoadingRifles --> |Semi-automatic Rifles| SemiAutomaticRifles

  %% Manually operated rifles leaves
  BreakActionRifles["Break-action<br/>Rifles<br/><img src='' width='56' height='56'/>"]
  BoltActionRifles["Bolt-action<br/>Rifles<br/><img src='' width='56' height='56'/>"]
  LeverActionRifles["Lever-action<br/>Rifles<br/><img src='' width='56' height='56'/>"]
  PumpActionRifles["Pump-action<br/>Rifles<br/><img src='' width='56' height='56'/>"]
  OtherManuallyOperatedRifles["Other Manually<br/>Operated Rifles<br/><img src='' width='56' height='56'/>"]

  ManuallyOperatedRifles --> |Break Action Rifles| BreakActionRifles
  ManuallyOperatedRifles --> |Bolt Action Rifles|BoltActionRifles
  ManuallyOperatedRifles --> |Lever Action Rifles| LeverActionRifles
  ManuallyOperatedRifles --> |Pump Action Rifles| PumpActionRifles
  ManuallyOperatedRifles --> |Other Manually Operated Rifles| OtherManuallyOperatedRifles

  %% Shotguns split (matches reference structure)
  SelfLoadingShotguns["Which self-loading shotgun matches best?"]
  ManuallyOperatedShotguns["Which manually operated shotguns matches best?"]

  Shotguns --> |Self-Loading| SelfLoadingShotguns
  Shotguns --> |Manually| ManuallyOperatedShotguns

  %% Self-loading shotguns leaves
  AutomaticShotguns["Automatic Shotguns<br/><img src='' width='56' height='56'/>"]
  SemiAutomaticShotguns["Semi-automatic<br/>Shotguns<br/><img src='' width='56' height='56'/>"]

  SelfLoadingShotguns --> |Automatic Shotguns| AutomaticShotguns
  SelfLoadingShotguns --> |Semi-Automatic Shotguns| SemiAutomaticShotguns

  %% Manually operated shotguns leaves
  BreakActionShotguns["Break-action<br/>Shotguns<br/><img src='' width='56' height='56'/>"]
  BoltActionShotguns["Bolt-action<br/>Shotguns<br/><img src='' width='56' height='56'/>"]
  LeverActionShotguns["Lever-action<br/>Shotguns<br/><img src='' width='56' height='56'/>"]
  PumpActionShotguns["Pump-action<br/>Shotguns<br/><img src='' width='56' height='56'/>"]
  OtherManuallyOperatedShotguns["Other Manually<br/>Operated Shotguns<br/><img src='' width='56' height='56'/>"]

  ManuallyOperatedShotguns --> |Break Action Shotguns| BreakActionShotguns
  ManuallyOperatedShotguns --> |Bolt Action Shotguns| BoltActionShotguns
  ManuallyOperatedShotguns --> |Lever Action Shotguns| LeverActionShotguns
  ManuallyOperatedShotguns --> |Pump Action Shotguns| PumpActionShotguns
  ManuallyOperatedShotguns --> |Other Manually Operated Shotguns| OtherManuallyOperatedShotguns

